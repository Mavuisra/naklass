# ğŸ”’ Guide des Permissions par RÃ´le

## ğŸ“‹ **Principe de SÃ©curitÃ©**

Chaque utilisateur n'a accÃ¨s qu'aux fonctionnalitÃ©s nÃ©cessaires Ã  son rÃ´le. Cette approche garantit la sÃ©curitÃ© et l'intÃ©gritÃ© des donnÃ©es.

---

## ğŸ‘‘ **Administrateur (admin)**

### **âœ… AccÃ¨s Complet**
- **Gestion des Classes** : CrÃ©er, modifier, supprimer, voir toutes les classes
- **Gestion des Ã‰lÃ¨ves** : Inscrire, dÃ©sinscrire, modifier les informations
- **Gestion des Cours** : CrÃ©er, modifier, supprimer, assigner aux classes
- **Gestion des Utilisateurs** : CrÃ©er, modifier, supprimer tous les comptes
- **Gestion des Enseignants** : Assigner, rÃ©assigner, lier les comptes
- **Gestion des Notes** : AccÃ¨s Ã  toutes les notes de toutes les classes
- **Gestion de la PrÃ©sence** : AccÃ¨s Ã  toutes les prÃ©sences
- **Gestion FinanciÃ¨re** : AccÃ¨s complet aux finances
- **ParamÃ¨tres** : Configuration complÃ¨te de l'Ã©cole

### **ğŸ”§ Actions Disponibles**
- Tous les boutons d'action sont visibles
- AccÃ¨s Ã  toutes les pages d'administration
- PossibilitÃ© de modifier la structure de l'Ã©cole

---

## ğŸ“ **Direction (direction)**

### **âœ… MÃªme niveau que l'Administrateur**
- **Gestion des Classes** : CrÃ©er, modifier, supprimer, voir toutes les classes
- **Gestion des Ã‰lÃ¨ves** : Inscrire, dÃ©sinscrire, modifier les informations
- **Gestion des Cours** : CrÃ©er, modifier, supprimer, assigner aux classes
- **Gestion des Utilisateurs** : CrÃ©er, modifier, supprimer tous les comptes
- **Gestion des Enseignants** : Assigner, rÃ©assigner, lier les comptes
- **Gestion des Notes** : AccÃ¨s Ã  toutes les notes de toutes les classes
- **Gestion de la PrÃ©sence** : AccÃ¨s Ã  toutes les prÃ©sences
- **Gestion FinanciÃ¨re** : AccÃ¨s complet aux finances
- **ParamÃ¨tres** : Configuration complÃ¨te de l'Ã©cole

### **ğŸ”§ Actions Disponibles**
- Tous les boutons d'action sont visibles
- AccÃ¨s Ã  toutes les pages d'administration
- PossibilitÃ© de modifier la structure de l'Ã©cole

---

## ğŸ‘¨â€ğŸ« **Enseignant (enseignant)**

### **âœ… AccÃ¨s PÃ©dagogique LimitÃ©**
- **Voir ses Classes** : Seulement les classes oÃ¹ il enseigne
- **Voir ses Cours** : Seulement les cours qui lui sont assignÃ©s
- **Gestion des Notes** : Saisir et modifier les notes de ses Ã©lÃ¨ves
- **Gestion de la PrÃ©sence** : Marquer la prÃ©sence dans ses classes
- **Voir les Ã‰lÃ¨ves** : Lecture seule des listes d'Ã©lÃ¨ves de ses classes

### **âŒ Actions NON AutorisÃ©es**
- **PAS** de crÃ©ation de classes
- **PAS** de modification de classes
- **PAS** d'inscription d'Ã©lÃ¨ves
- **PAS** de gestion des inscriptions
- **PAS** de crÃ©ation/modification de cours
- **PAS** d'assignation de cours aux classes
- **PAS** de gestion des utilisateurs
- **PAS** d'accÃ¨s aux finances
- **PAS** de modification des paramÃ¨tres

### **ğŸ”§ Actions Disponibles**
- Bouton "Voir" pour les classes (lecture seule)
- Bouton "GÃ©rer les Notes" pour ses cours
- Bouton "GÃ©rer la PrÃ©sence" pour ses classes
- Bouton "Voir les Ã‰lÃ¨ves" (lecture seule)

---

## ğŸ“ **SecrÃ©taire (secretaire)**

### **âœ… AccÃ¨s Administratif IntermÃ©diaire**
- **Voir les Classes** : Lecture de toutes les classes
- **Gestion des Ã‰lÃ¨ves** : Inscrire, dÃ©sinscrire, modifier les informations
- **Gestion des Inscriptions** : Valider, annuler les inscriptions
- **Voir les Cours** : Lecture des cours assignÃ©s aux classes
- **Gestion des PrÃ©sences** : AccÃ¨s aux prÃ©sences de toutes les classes

### **âŒ Actions NON AutorisÃ©es**
- **PAS** de crÃ©ation de classes
- **PAS** de modification de classes
- **PAS** de crÃ©ation/modification de cours
- **PAS** d'assignation de cours aux classes
- **PAS** de gestion des utilisateurs
- **PAS** d'accÃ¨s aux finances
- **PAS** de modification des paramÃ¨tres

### **ğŸ”§ Actions Disponibles**
- Bouton "GÃ©rer les Ã‰lÃ¨ves" pour toutes les classes
- Bouton "Voir" pour les classes (lecture seule)
- Bouton "GÃ©rer la PrÃ©sence" pour toutes les classes

---

## ğŸ’° **Caissier (caissier)**

### **âœ… AccÃ¨s Financier LimitÃ©**
- **Gestion des Paiements** : Enregistrer, modifier, annuler les paiements
- **Gestion des Factures** : CrÃ©er, modifier, envoyer les factures
- **Gestion des Ã‰lÃ¨ves** : Voir les informations financiÃ¨res des Ã©lÃ¨ves
- **Rapports Financiers** : GÃ©nÃ©rer des rapports de paiement

### **âŒ Actions NON AutorisÃ©es**
- **PAS** d'accÃ¨s aux classes
- **PAS** d'accÃ¨s aux cours
- **PAS** de gestion des inscriptions
- **PAS** de gestion des utilisateurs
- **PAS** de modification des paramÃ¨tres

---

## ğŸ” **SystÃ¨me de SÃ©curitÃ©**

### **1. VÃ©rification des RÃ´les**
```php
// Exemple de vÃ©rification
requireRole(['admin', 'direction']); // Seuls admin et direction
requireRole(['enseignant']);         // Seuls les enseignants
```

### **2. ContrÃ´le d'AccÃ¨s aux DonnÃ©es**
```php
// Les enseignants ne voient que leurs classes
if (hasRole('enseignant')) {
    $query = "WHERE enseignant_id = :enseignant_id";
}
```

### **3. Interface Conditionnelle**
```php
// Boutons visibles selon le rÃ´le
<?php if (hasRole(['admin', 'direction'])): ?>
    <a href="edit.php">Modifier</a>
<?php endif; ?>
```

---

## ğŸ“± **Pages et Permissions**

| Page | Admin | Direction | Enseignant | SecrÃ©taire | Caissier |
|------|-------|-----------|------------|------------|----------|
| `classes/index.php` | âœ… | âœ… | âŒ | âŒ | âŒ |
| `classes/create.php` | âœ… | âœ… | âŒ | âŒ | âŒ |
| `classes/edit.php` | âœ… | âœ… | âŒ | âŒ | âŒ |
| `classes/view.php` | âœ… | âœ… | âœ… | âœ… | âŒ |
| `classes/students.php` | âœ… | âœ… | âŒ | âœ… | âŒ |
| `classes/my_classes.php` | âœ… | âœ… | âœ… | âŒ | âŒ |
| `grades/` | âœ… | âœ… | âœ… | âŒ | âŒ |
| `presence/` | âœ… | âœ… | âœ… | âœ… | âŒ |
| `finance/` | âœ… | âœ… | âŒ | âŒ | âœ… |
| `settings/` | âœ… | âœ… | âŒ | âŒ | âŒ |

---

## ğŸš¨ **SÃ©curitÃ© ImplÃ©mentÃ©e**

### **1. VÃ©rification des Sessions**
- Authentification obligatoire sur toutes les pages
- VÃ©rification de l'Ã©cole de l'utilisateur
- Expiration automatique des sessions

### **2. Validation des DonnÃ©es**
- Sanitisation des entrÃ©es utilisateur
- Validation des paramÃ¨tres GET/POST
- Protection contre les injections SQL

### **3. ContrÃ´le d'AccÃ¨s**
- VÃ©rification des rÃ´les avant affichage
- Redirection automatique si non autorisÃ©
- Logs des tentatives d'accÃ¨s non autorisÃ©es

---

## ğŸ§ª **Test des Permissions**

Pour tester que les permissions fonctionnent correctement :

1. **Connectez-vous avec un compte enseignant**
2. **AccÃ©dez Ã ** `classes/test_permissions.php`
3. **VÃ©rifiez que seules les actions autorisÃ©es sont visibles**

---

## ğŸ“ **Support et Questions**

Si vous avez des questions sur les permissions ou si vous constatez un problÃ¨me de sÃ©curitÃ© :

1. **VÃ©rifiez d'abord** ce guide
2. **Testez avec** `classes/test_permissions.php`
3. **Contactez l'administration** si le problÃ¨me persiste

---

## ğŸ”„ **Mise Ã  Jour des Permissions**

Les permissions sont dÃ©finies dans :
- `includes/functions.php` - Fonctions de vÃ©rification
- Chaque page individuelle - VÃ©rifications spÃ©cifiques
- `includes/sidebar.php` - Affichage conditionnel du menu

**âš ï¸ Ne modifiez jamais les permissions sans comprendre les implications de sÃ©curitÃ© !**











